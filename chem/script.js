// chem/script.js
// 일반화학 개념 노트용 JS

// 각 단원별 내용 (Markdown 느낌의 텍스트)
const chemPages = {
  "01 원자 구조": `
## 1. 원자의 구성
- 물질을 이루는 가장 작은 입자
- **구성 입자**
  - 양성자 (p⁺): 양전하 +1, 질량 1 u, 원자번호 = 양성자 수
  - 중성자 (n⁰): 전하 0, 질량 1 u, 동위원소를 구분
  - 전자 (e⁻): 음전하 -1, 질량 거의 0, 화학적 성질 결정

## 2. 원자 번호와 질량수
- 원자번호 Z : 양성자 수 = 전자 수(중성 원자일 때)
- 질량수 A : A = 양성자 수 + 중성자 수
- 동위원소
  - Z는 같고, A가 다른 원자들
  - 예) ¹²C, ¹³C, ¹⁴C

## 3. 전자배치 기본 원리
- **오프바우 원리** : 에너지가 낮은 오비탈부터 채움
- **파울리 배타 원리** : 하나의 오비탈에는 스핀이 반대인 전자 2개까지만
- **훈트 규칙** : 같은 에너지의 오비탈에는 전자를 한 개씩 먼저 넣고, 그 다음 짝지음

## 4. 양자수 (간단 정리)
- 주양자수 n : 오비탈의 크기와 에너지 (껍질)
- 부양자수 l : 오비탈의 모양 (s, p, d, f)
- 자기양자수 mₗ : 오비탈의 방향
- 스핀양자수 mₛ : 전자의 스핀 (+1/2, -1/2)  
`,

  "02 주기율표와 주기성": `
## 1. 주기율표 기본
- 가로줄: **주기** – 같은 주기 = 같은 껍질 수(n)
- 세로줄: **족** – 비슷한 화학적 성질
- 금속 / 비금속 / 준금속 영역 구분

## 2. 주요 주기성 (대략적인 경향)
- **원자 반지름**
  - 같은 주기: 왼쪽 → 오른쪽으로 갈수록 감소
  - 같은 족: 위 → 아래로 갈수록 증가
- **이온화 에너지 (전자 떼어내기 어려운 정도)**
  - 원자 반지름이 작을수록, 핵 전하가 클수록 ↑
  - 보통 주기에서 오른쪽 위로 갈수록 커짐
- **전자 친화도**
  - 전자를 얻을 때의 에너지 변화
  - 할로젠족(17족)이 큰 음의 전자 친화도
- **전기음성도**
  - 공유 전자쌍을 끌어당기는 힘
  - 오른쪽 위(특히 F)가 가장 큼

## 3. 족별 간단 특징
- 1족 알칼리 금속 : 반응성 매우 크고 +1 이온 형성
- 2족 알칼리 토금속 : +2 이온, 단단하고 고융점
- 17족 할로젠 : -1 이온 잘 형성, 비금속
- 18족 비활성 기체 : 거의 반응하지 않음 (전자껍질이 가득 참)
`,

  "03 화학 결합": `
## 1. 이온 결합
- 금속 + 비금속
- 전자를 완전히 주고받아 **양이온, 음이온** 형성
- 정전기적 인력으로 결정 격자 구조 만들며, 고체에서는 전기전도 X
- 물에 녹거나 녹으면 이온이 움직여 전도 O

## 2. 공유 결합
- 비금속 + 비금속
- 전자를 **공유**하여 옥텟 규칙을 만족
- 결합쌍 / 비공유 전자쌍 표현 (루이스 구조)

## 3. 극성과 전기음성도
- 전기음성도 차이가 크면 **극성 공유 결합**
  - 예) H–Cl, O–H
- 분자의 전체 대칭성에 따라 **극성 분자 / 무극성 분자** 결정

## 4. 분자 간 힘
- **수소 결합**: H–O, H–N, H–F 에서 강한 인력
- **쌍극자-쌍극자 상호작용**: 극성 분자끼리
- **분산력(런던힘)**: 모든 분자에 존재, 전자가 많을수록 ↑

이 힘들의 크기 차이가 끓는점, 녹는점에 큰 영향을 줌.
`,

  "04 화학량론과 몰": `
## 1. 몰(mol)
- 1몰 = 6.022×10²³ 개(아보가드로 수)의 입자
- 질량(m, g) ↔ 몰수(n, mol) ↔ 입자수 사이 변환 사용
  - n = m / M (M: 몰질량)

## 2. 화학식량과 몰질량
- 물질 1몰의 질량(g/mol)
- 예) H₂O : 2×1.0 + 16.0 = 18.0 g/mol

## 3. 화학 반응식과 계수
- 반응식 계수 = 입자수 비 = 몰수 비
  - 예) 2H₂ + O₂ → 2H₂O
  - H₂ : O₂ : H₂O = 2 : 1 : 2 (몰비)

## 4. 한계 반응물
- 두 반응물 중 **먼저 다 소모되는 반응물**
- 계산 순서
  1. 각 반응물의 몰수 구하기
  2. 반응식 몰비와 비교
  3. 생성물 몰수 → 질량, 부피 등으로 변환

## 5. 수득률
- 이론 수득량 : 계산으로 얻을 수 있는 최대량
- 실제 수득량 : 실험에서 실제로 얻은 양
- 수득률(%) = (실제 / 이론) × 100
`,

  "05 기체, 액체, 고체": `
## 1. 기체의 성질
- 부피와 모양이 용기와 같아짐, 압축 잘 됨
- 이상기체 상태방정식
  - PV = nRT
  - P: 압력, V: 부피, n: 몰수, T: 절대온도(K), R: 기체상수

## 2. 액체의 성질
- 부피는 거의 일정, 모양은 용기와 같음
- **표면장력**, **점도**, **증기압** 등
  - 분자간 인력이 강할수록: 표면장력↑, 끓는점↑, 증기압↓  

## 3. 고체의 성질
- 부피와 모양이 일정
- 결정성 고체 vs 비결정성 고체
  - 결정성: 규칙적인 배열 (NaCl, 다이아몬드)
  - 비결정성: 무질서한 배열 (유리, 플라스틱)

## 4. 상변화
- 고체 ↔ 액체: 융해 / 응고
- 액체 ↔ 기체: 기화 / 응축
- 고체 ↔ 기체: 승화 / 승화역

- 상평형도에서 **삼중점**, **임계점** 개념 등장
`,

  "06 열화학": `
## 1. 계와 주변
- 계(system) : 관심 대상 (예: 비커 속 용액)
- 주변(surroundings) : 계를 제외한 모든 것
- 흡열반응: 열을 흡수 (ΔH > 0)
- 발열반응: 열을 방출 (ΔH < 0)

## 2. 엔탈피(ΔH)
- 상압에서 열의 출입을 나타내는 상태 함수
- 반응 엔탈피: 생성물 엔탈피 – 반응물 엔탈피

## 3. 헤스의 법칙
- "반응의 엔탈피 변화는 경로와 무관하고, 처음과 나중 상태에만 의존"
- 여러 반응식을 더해서 원하는 반응식 만들고, ΔH도 같이 더함

## 4. 결합 에너지
- 결합 1몰을 끊는 데 필요한 에너지
- 대략적인 ΔH 계산 가능:
  - ΔH ≈ (끊는 결합 에너지 합) – (형성되는 결합 에너지 합)
`,

  "07 화학 평형": `
## 1. 가역반응과 평형
- 예: N₂ + 3H₂ ⇌ 2NH₃
- 정반응 속도 = 역반응 속도 → **평형 상태**

## 2. 평형상수 K
- aA + bB ⇌ cC + dD 일 때
- K = [C]ᶜ [D]ᵈ / [A]ᵃ [B]ᵇ  (기체면 분압 사용)

- K >> 1 : 생성물 쪽에 치우친 평형
- K << 1 : 반응물 쪽에 치우친 평형

## 3. 르 샤틀리에의 원리
평형 상태에서 조건(농도, 압력, 온도)을 바꾸면,
계는 그 영향을 줄이는 방향으로 이동.

- 농도 ↑ : 그 물질을 **소모하는 방향**으로 평형 이동
- 압력 ↑(부피 ↓) : 기체 몰수가 **작은 쪽**으로 이동
- 온도 변화 : 흡열/발열 반응에 따라  
  - 흡열 반응: 온도 ↑ → 정반응 쪽 유리
  - 발열 반응: 온도 ↑ → 역반응 쪽 유리
`,

  "08 산·염기와 pH": `
## 1. 아레니우스 정의
- 산: 수용액에서 H⁺ (또는 H₃O⁺)를 내는 물질
- 염기: 수용액에서 OH⁻를 내는 물질

## 2. 브뢴스테드-로우리 정의
- 산: 양성자(H⁺)를 주는 물질
- 염기: 양성자(H⁺)를 받는 물질
- 짝산-짝염기 쌍 개념

## 3. pH
- pH = -log[H⁺]
- 25℃ 물에서
  - 중성: [H⁺] = 1.0×10⁻⁷ → pH = 7
  - 산성: pH < 7
  - 염기성: pH > 7

## 4. 강산, 약산
- 강산: 거의 완전히 이온화 (HCl, HNO₃, H₂SO₄ 등)
- 약산: 일부만 이온화 (CH₃COOH 등)
- 해리도와 산 해리 상수 Kₐ 이용

## 5. 완충 용액 (버퍼)
- 약산 + 그 짝염기의 염 (또는 약염기 + 짝산의 염)
- 소량의 산·염기를 넣어도 pH 변화를 작게 유지
`,

  "09 산화·환원과 전지": `
## 1. 산화·환원 정의
- 산화: 전자를 잃는 것, 산화수 증가
- 환원: 전자를 얻는 것, 산화수 감소
- 산화제: 다른 물질을 산화시키고 자신은 환원
- 환원제: 다른 물질을 환원시키고 자신은 산화

## 2. 산화수 규칙 (간단판)
- 원소 상태: 0
- 알칼리 금속(1족): +1, 알칼리 토금속(2족): +2
- F: 항상 -1
- 산소: 대체로 -2 (과산화물에서는 -1)
- 수소: 비금속과 결합 시 +1, 금속과 결합 시 -1

## 3. 갈바니 전지
- 자발적인 산화·환원 반응을 이용해 전기 에너지 생산
- 산화가 일어나는 곳: **아노드(-)**
- 환원이 일어나는 곳: **캐소드(+)**
- 전자는 항상 **아노드 → 캐소드**로 이동

## 4. 표준 전극 전위
- E°값이 클수록 환원되기 쉽다.
- 두 전극의 E° 차이 = 전지 전압 (이론값)
`,

  "10 반응 속도와 속도론": `
## 1. 반응 속도에 영향을 주는 요인
- 농도: 농도 ↑ → 충돌 횟수 ↑ → 속도 ↑
- 온도: 온도 ↑ → 분자 운동 에너지 ↑ → 속도 ↑
- 촉매: 활성화 에너지 낮춤, 평형 위치는 변하지 않음
- 반응물의 상태(고체, 액체, 기체, 표면적)

## 2. 활성화 에너지
- 반응이 일어나기 위해 넘어야 하는 에너지 장벽
- 온도가 높을수록 이 장벽을 넘는 입자 수 ↑

## 3. 속도식 (간단한 형태)
- v = k[A]ᵐ[B]ⁿ
  - k: 속도 상수
  - m, n: 각 반응물에 대한 반응 차수
- 전체 반응 차수 = m + n

## 4. 촉매
- 반응 경로를 바꾸어 활성화 에너지를 낮춤
- 반응 전후에 소모되지 않고 다시 나옴
- 평형상수 K는 변하지 않지만, 평형에 도달하는 **시간**이 짧아짐
`
};

// 간단한 마크다운 → HTML 변환 (제목이랑 줄바꿈 정도만)
function renderMarkdown(md) {
  return md
    .replace(/^### (.*)$/gm, "<h3>$1</h3>")
    .replace(/^## (.*)$/gm, "<h2>$1</h2>")
    .replace(/^# (.*)$/gm, "<h1>$1</h1>")
    .replace(/\n- (.*)/g, "<li>$1</li>")
    .replace(/(<li>.*<\/li>)/gs, "<ul>$1</ul>")
    .replace(/\n\n/g, "<br><br>");
}

document.addEventListener("DOMContentLoaded", () => {
  const navContainer = document.querySelector("#chem-nav");   // 단원 버튼/목록 넣을 곳
  const content = document.querySelector("#chem-content");    // 내용 표시 영역

  if (!navContainer || !content) return; // 해당 id가 없으면 아무것도 안 함

  // 왼쪽(또는 상단)에 단원 목록 버튼 자동 생성
  Object.keys(chemPages).forEach((title, idx) => {
    const btn = document.createElement("button");
    btn.textContent = title;
    btn.className = "chem-nav-item";
    btn.addEventListener("click", () => {
      // 버튼 클릭 시 내용 표시
      content.innerHTML = renderMarkdown(chemPages[title]);

      // 활성화 버튼 스타일 주기
      document
        .querySelectorAll(".chem-nav-item")
        .forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
    });

    if (idx === 0) {
      btn.classList.add("active");
      content.innerHTML = renderMarkdown(chemPages[title]); // 첫 페이지 기본 표시
    }

    navContainer.appendChild(btn);
  });
});